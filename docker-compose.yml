services:
  openclaw:
    build:
      context: .
      dockerfile: Dockerfile
    # Or use pre-built image:
    # image: ghcr.io/waterlou/openclaw:latest

    container_name: openclaw
    restart: unless-stopped

    ports:
      - "18789:18789"

    environment:
      # AI Provider (set your API key)
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY}

      # Gateway configuration
      OPENCLAW_GATEWAY_BIND: lan

      # Browser configuration
      PLAYWRIGHT_BROWSERS_PATH: /home/node/.cache/ms-playwright

    volumes:
      - openclaw-data:/home/node/.openclaw
      - openclaw-workspace:/home/node/workspace
      - openclaw-browser-cache:/home/node/.cache/ms-playwright

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:18789/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 15s

volumes:
  openclaw-data:
  openclaw-workspace:
  openclaw-browser-cache:
